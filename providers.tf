################################################################################
# Docker Providers - 多主机支持
################################################################################
# 
# 通过 provider alias 支持多个远程主机
# 添加新主机：复制一个 provider 块，修改 alias 和对应的 hosts key
#
################################################################################

terraform {
  required_providers {
    docker = {
      source  = "kreuzwerker/docker"
      version = "~> 3.0"
    }
    null = {
      source  = "hashicorp/null"
      version = "~> 3.2"
    }
    archive = {
      source  = "hashicorp/archive"
      version = "~> 2.4"
    }
  }
}

# ============================================================================
# 主机 A（默认主机）
# ============================================================================
provider "docker" {
  alias = "host_a"
  host  = "ssh://${var.hosts["host_a"].user}@${var.hosts["host_a"].ip}"
}

# ============================================================================
# 添加更多主机示例（取消注释即可使用）
# ============================================================================
# provider "docker" {
#   alias = "host_b"
#   host  = "ssh://${var.hosts["host_b"].user}@${var.hosts["host_b"].ip}"
# }
